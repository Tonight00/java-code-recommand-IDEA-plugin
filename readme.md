# 基于模板的java源代码第N+1行自动生成

## 项目思路
1. **基于模板**：由于编程语言有很强的结构性和上下文联系性。所以我们决定通过**分步推荐**的方式，抽取文本中的结构信息、变量信息、常量信息、引用信息等
来提升推荐的准确度，而不是选择采用直接将文本转换成向量，然后进行N+1的预测的方式。
2. **集成在IDEA**: 为了方便使用，通过IDEA-Plugins的方式集成在编辑页面
3. **数据集**：选择按照星级从github上爬取java的源代码,大概400MB(记不太清了，也可能是40MB)
4. **分步推荐**：
    4.1 确定第N+1行句子类型
    4.2 确定第N+1行变量、常量
    4.3 提高topK种选择
    准确的说，我们认为一行代码，大部分情况下可以通过句子类型+变量+常量+符号来组成。
5. **举例**
   待预测文本
   ```java
   1.  int  n = 10;
   2.  int  i = 1,j=1;
   3.  for (i=1; i<n ; i++) {
   4.       int j=i;
   5.       if( j > i ) {
   6.             j++; 
   7.       }
   8.  } // 待预测行
   9.  if(j == n) //待预测行
   ```java
   现在**假设知道前7行**的内容，需要预测第8行的内容
   第一步：抽象文本每一行的类型
   ```java
   1.  赋值 
   2.  赋值
   3.  for循环带左大括号
   4.  赋值
   5.  if带左大括号
   6.  自增
   7. 右大括号
   ``` java
   
   通过神经网络，我们在数据集充足的情况下很高概率预测出下一行是右大括号。
   那么如果现在知道前八行需要预测第9行呢？
   第一步：
        与预测第8行一样，判断出第9行的类型，假设预测书也是if,
        生成预推荐模板： if( ?=?) { 
        这里需要注意的是事实上应该是从 if(?) { ->执行第一步预测？的内容 -> if(?=?) {
   第二步：根据前8行出现的变量进行预测
   
   ``` java
   1. n
   2. i,j
   3. i
   4. j
   5. j,i
   6. j
   7. 
   8. 
      假设预测的topK是i,j,n。
   ``` java
   
   第三步：   
      那么我们会通过**下拉列表**的方式来让用户进行
   自由选择,来填充？。
        
 ## 注意
 由于本项目是两年前做的，那时候作者们都还是大二学生，所以对于神经网络模型、nlp、编译都不甚了解。所以源代码更多的是**通过正则表达式和
 枚举形式来粗略地实现上诉效果**
 强烈不建议拿来主义
